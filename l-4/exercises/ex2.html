<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Fill in the Blanks</title>

<link href="https://fonts.googleapis.com/css2?family=Livvic:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

<style>

body{
  font-family:"Livvic",sans-serif;
  background: url(./uploads/bg4.png);
  height:100vh;
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

.app{
  width:100%;
  max-width:1100px;
  padding:24px;
  text-align:center;
}

.header h1{
  font-weight:500;
  color:#ff7a00;
  font-size:30px;
  margin:0 0 10px;
}

.q-number{
  font-size:18px;
  color:#e4ebeb;
  margin-bottom:20px;
}

.q-text{
  font-size:clamp(22pt,4vw,34pt);
  color:#ffffff;
}

.blank{
  display:inline-block;
  min-width:110px;
  padding:0 6px;
  border-bottom:4px dashed #ffffff;
  font-weight:700;
}

.blank.correct{ border-color:#2ed573; color:#2ed573; }
.blank.wrong{ border-color:#dc3545; color:#dc3545; animation:shake .4s; }

.letter-box{
  margin:40px auto 0;
  background:#ffffffcc;
  padding:22px 26px;
  border-radius:28px;
  display:inline-flex;
  gap:18px;
  box-shadow:0 12px 25px rgba(0,0,0,0.12);
}

.part{
  padding:16px 22px;
  font-size:26px;
  font-weight:700;
  background:white;
  border-radius:22px;
  border:5px solid white;
  cursor:pointer;
  box-shadow:0 8px 18px rgba(0,0,0,0.12);
}

.part.used{ opacity:.35; pointer-events:none; }

#nextBtn,#prevBtn{
  position:fixed;
  top:50%;
  transform:translateY(-50%);
  font-size:24px;
  font-weight:700;
  padding:15px 30px;
  border-radius:50px;
  border:4px solid white;
  cursor:pointer;
  display:none;
}

#nextBtn{ right:20px; background:#4cc9f0; }
#prevBtn{ left:20px; background:#ff758c; }

.smiley{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(.4);
  font-size:200px;
  opacity:0;
  transition:.45s cubic-bezier(.17,.89,.32,1.49);
  pointer-events:none;
  z-index:2000;
}
.smiley.show{ opacity:1; transform:translate(-50%,-50%) scale(1); }

.confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1500;
}
.confetti-piece{
  position:absolute;
  width:10px;
  height:14px;
  top:-20px;
  animation:fall 1.8s linear forwards;
}
@keyframes fall{
  to{ transform:translateY(100vh) rotate(720deg); opacity:0; }
}
@keyframes shake{
  25%{ transform:translateX(-6px); }
  75%{ transform:translateX(6px); }
}

.final-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:4000;
}
.final-card{
  background:white;
  padding:50px;
  border-radius:40px;
  text-align:center;
}
</style>
</head>

<body>
<div class="app">
  <div class="header"><h1>Fill in the Blanks</h1></div>
  <div id="quiz"></div>
  <button id="prevBtn">‚óÄ PREV</button>
  <button id="nextBtn">NEXT ‚ñ∂</button>
  <div id="smiley" class="smiley"></div>
  <div id="confetti" class="confetti"></div>
</div>

<script>
const quiz=[
 { text:"Carrot is a _____.", answer:"root", parts:["ot","ru","ro","to"] },
 { text:"_____ has many seeds.", answer:"papaya", parts:["pa","ya","pe","pa","ma"] },
 { text:"Wheat is a _____.", answer:"grain", parts:["gra","ga","in","rn"] },
 { text:"Green grams are _____.", answer:"pulses", parts:["ses","pu","pul","les"] },
 { text:"Pepper is a _____.", answer:"spice", parts:["spi","ce","si","pe"] }
];

const quizBox=document.getElementById("quiz");
const nextBtn=document.getElementById("nextBtn");
const prevBtn=document.getElementById("prevBtn");
const smiley=document.getElementById("smiley");
const confettiBox=document.getElementById("confetti");

let current=0,built="",audioCtx=null;
const answered=Array(quiz.length).fill(false);

function ensureAudio(){
 if(!audioCtx) audioCtx=new(window.AudioContext||window.webkitAudioContext)();
 if(audioCtx.state==="suspended") audioCtx.resume();
 return audioCtx;
}
document.addEventListener("click",ensureAudio,{once:true});

function playZzzSound(){
 const c=ensureAudio(),t=c.currentTime,o=c.createOscillator(),g=c.createGain();
 o.type="square";o.frequency.value=180;
 g.gain.setValueAtTime(0,t);g.gain.linearRampToValueAtTime(.12,t+.01);g.gain.exponentialRampToValueAtTime(.0001,t+.35);
 o.connect(g);g.connect(c.destination);o.start(t);o.stop(t+.35);
}

function successSound(){
 const c=ensureAudio(),t=c.currentTime,g=c.createGain();
 g.gain.setValueAtTime(.0001,t);g.gain.linearRampToValueAtTime(.18,t+.02);g.gain.exponentialRampToValueAtTime(.0001,t+.65);
 g.connect(c.destination);
 [660,880,1100,1320].forEach((f,i)=>{const o=c.createOscillator();o.frequency.value=f;o.connect(g);o.start(t+i*.02);o.stop(t+.65);});
}

function confetti(n=120){
 confettiBox.innerHTML="";
 ["#f778a1","#4cc9f0","#ffaa00","#2ed573","#ff4fd8"].forEach(()=>{});
 for(let i=0;i<n;i++){
  const p=document.createElement("div");
  p.className="confetti-piece";
  p.style.left=Math.random()*100+"%";
  p.style.background=["#f778a1","#4cc9f0","#ffaa00","#2ed573","#ff4fd8"][Math.random()*5|0];
  confettiBox.appendChild(p);
 }
 setTimeout(()=>confettiBox.innerHTML="",2200);
}

function showSmiley(e){
 smiley.textContent=e;
 smiley.classList.add("show");
 setTimeout(()=>smiley.classList.remove("show"),1200);
}

function render(){
 built="";
 nextBtn.style.display="none";
 prevBtn.style.display=current>0?"block":"none";
 const q=quiz[current];

 quizBox.innerHTML=`
 <div class="q-number">Question ${current+1} of ${quiz.length}</div>
 <div class="q-text">${q.text.replace("_____","<span class='blank' id='blank'></span>")}</div>
 <div class="letter-box">${q.parts.map(p=>`<div class="part">${p}</div>`).join("")}</div>
 `;

 const blank=document.getElementById("blank");

 document.querySelectorAll(".part").forEach(part=>{
  part.onclick=()=>{
   built+=part.textContent;
   blank.textContent=built;
   part.classList.add("used");
   if(built.length>=q.answer.length){
    if(built===q.answer){
     blank.classList.add("correct");
     answered[current]=true;
     showSmiley("üòÑ");
     confetti();
     successSound();
     current===quiz.length-1?setTimeout(finishQuiz,1200):nextBtn.style.display="block";
    }else{
     blank.classList.add("wrong");
     showSmiley("üò≠");
     playZzzSound();
     setTimeout(render,700);
    }
   }
  };
 });

 if(answered[current]){
  blank.textContent=q.answer;
  blank.classList.add("correct");
  document.querySelectorAll(".part").forEach(p=>p.classList.add("used"));
  nextBtn.style.display="block";
 }
}

nextBtn.onclick=()=>{current++;render();};
prevBtn.onclick=()=>{if(current>0){current--;render();}};

function finishQuiz(){
 confetti(260);
 successSound();
 showSmiley("ü•≥");
 const d=document.createElement("div");
 d.className="final-overlay";
 d.innerHTML=`<div class="final-card"><h1>üèÜ CHAMPION!</h1><p>You completed the quiz!</p><button onclick="location.reload()" style="padding:18px 40px;border-radius:40px;font-size:22px;background:#4cc9f0;border:none;color:white">PLAY AGAIN</button></div>`;
 document.body.appendChild(d);
}

render();
</script>
</body>
</html>
