<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>True or False â€” Fun Quiz for Grade 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Livvic:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --true: #28a745;
            --false: #dc3545;
            --card-radius: 24px;
            --text-color: #000000;
            --q-text-color: #2F4F4F;
            --blue: #4cc9f0;
            --pink: #f778a1;
            --light-bg: rgba(255, 255, 255, 0.7);
        }

        html,
        body {
            height: 100vh;
            width: 100%;
            margin: 0;
            font-family: 'Livvic';
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 18px;
            overflow: hidden;
            font-size: 13pt;
        }

        .wrap {
            width: 100%;
            max-width: 900px;
            border-radius: var(--card-radius);
            overflow: hidden;
            padding: 28px;
            box-sizing: border-box;
            position: relative;
            z-index: 10;
        }

        .question-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 28px;
            min-height: 360px;
            justify-content: center;
        }

        .q-number {
            font-weight: 400;
            color: var(--q-text-color);
            opacity: .9;
        }

        .q-text {
            font-size: clamp(22pt, 4vw, 36pt);
            color: var(--q-text-color);
            text-align: center;
            line-height: 1.05;
        }

        .opts {
            display: flex;
            gap: 20px;
            justify-content: center;
            width: 100%;
            max-width: 700px;
        }

        .big-btn {
            flex: 1;
            padding: 22px 16px;
            border-radius: 14px;
            border: 3px solid var(--text-color);
            font-size: 30px;
            font-weight: 100;
            color: var(--text-color);
            cursor: pointer;
            transition: transform .12s, background .2s, color .2s;
            font-family: 'Livvic';
            background: var(--light-bg);
            box-shadow: 0 10px 28px rgba(10, 30, 50, 0.1);
            user-select: none;
        }

        .big-btn:active {
            transform: translateY(2px);
        }

        .big-btn:hover {
            background: skyblue;
        }

        #btnTrue {
            background: #BEE8C3;
        }

        #btnFalse {
            background: #FFDA9A;
        }

        .big-btn.selected {
            color: white;
            transform: translateY(-3px);
        }

        .big-btn.btn-true.selected {
            background: var(--true);
        }

        .big-btn.btn-false.selected {
            background: var(--false);
        }

        .controls {
            position: relative;
            width: 100%;
            max-width: 700px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0;
            pointer-events: auto;
            z-index: 100;
            margin-top: 30px;
        }

        .nav-btn {
            padding: 20px;
            border-radius: 50px;
            font-weight: 400;
            font-size: 24px;
            color: black;
            border: 4px solid white;
            cursor: pointer;
            font-family: "Livvic";
            transition: transform .12s;
            pointer-events: auto;
        }

        .nav-btn:hover {
            transform: scale(1.08);
        }

        .nav-btn[disabled] {
            opacity: .45;
            cursor: not-allowed;
            transform: none;
        }

        #prevBtn {
            background: var(--pink);
            color: #2F4F4F;
            font-size: 24px;
            font-family: "Livvic";
            font-weight: 400;
            border: 4px solid #fff;
            padding: 20px;
        }

        #nextBtn {
            background: var(--blue);
            color: #2F4F4F;
            font-size: 24px;
            font-family: "Livvic";
            font-weight: 400;
            border: 4px solid #fff;
            padding: 20px;
        }

        #feedbackSmiley {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            font-size: 200px;
            opacity: 0;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s;
            z-index: 2000;
            pointer-events: none;
        }

        #feedbackSmiley.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1);
        }

        #feedbackSmiley.fade {
            opacity: 0;
            transition: all 0.8s ease-out;
        }

        .teacher-popup {
            position: fixed;
            right: 12px;
            bottom: 12px;
            width: 25vw;
            height: 25vh;
            top: 20px;
            min-width: 180px;
            min-height: 160px;
            max-width: 360px;
            max-height: 360px;
            background: white;
            border-radius: 14px;
            box-shadow: 0 30px 60px rgba(8, 20, 40, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            transform: translateY(120%);
            opacity: 0;
            transition: transform .35s cubic-bezier(.2, .9, .2, 1), opacity .25s;
            z-index: 1500;
            overflow: hidden;
            border: 1px solid rgba(10, 80, 100, 0.06);
        }

        .teacher-popup.show {
            transform: translateY(0);
            opacity: 1;
        }

        .teacher-img {
            width: 48%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
            background: #f0f6f6;
            flex: 0 0 48%;
        }

        .teacher-msg {
            flex: 1;
            font-weight: 900;
            color: #073336;
            font-size: 18px;
            text-align: left;
            padding-right: 8px;
        }

        canvas.confetti {
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1600;
        }

        .final-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 220;
            backdrop-filter: blur(5px);
        }

        .final-modal {
            width: min(600px, 90%);
            background: white;
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        .final-modal h2 {
            font-size: 48px;
            color: #2c7a4b;
            margin: 0 0 20px 0;
            font-weight: 400;
        }

        .btn {
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            border: none;
            font-size: 20px;
            background: #4cc9f0;
            color: white;
        }

        @media(max-width:620px) {
            .q-text {
                font-size: 28px;
            }

            .big-btn {
                font-size: 30px;
                font-weight: 200;
                padding: 16px;
                font-family: 'Livvic';
            }

            .teacher-popup {
                width: 40vw;
                height: 22vh;
                min-width: 150px;
                min-height: 120px;
                right: 8px;
                bottom: 8px;
            }

            .nav-btn {
                font-size: 16px;
                font-family: 'Livvic';
            }

            .controls {
                padding: 0 0px;
            }
        }

        .bird-btn {
            background: #FFC312;
            border: 4px solid #F79F1F;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 0 #e58e26;
            transition: transform 0.1s;
        }

        .bird-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #e58e26;
        }

        .bird-btn svg {
            width: 40px;
            height: 40px;
            fill: #333;
        }
    </style>
</head>

<body>
    <div class="wrap">

        <div id="main" class="question-area" style="display:flex;">

            <div style="display:flex;gap:12px;align-items:center;">
                <div class="q-number" id="qNumber">Question 1 of 5</div>
                <button id="readBtn" class="bird-btn" title="Read question">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                    </svg>
                </button>
            </div>

            <div class="q-text" id="qText">Loading question...</div>

            <div class="opts">
                <button id="btnTrue" class="big-btn btn-true">True</button>
                <button id="btnFalse" class="big-btn btn-false">False</button>
            </div>

            <div class="controls">
                <button id="prevBtn" class="nav-btn" disabled>PREV â—€</button>
                <button id="nextBtn" class="nav-btn" disabled>NEXT â–¶</button>
            </div>

        </div>

    </div>

    <div id="teacherPopup" class="teacher-popup">
        <img id="teacherImg" class="teacher-img" src="uploads/yes.png" alt="Teacher reaction">
        <div id="teacherMsg" class="teacher-msg">Great job! That's correct ðŸŽ‰</div>
    </div>

    <div id="feedbackSmiley"></div>

    <canvas id="confettiCanvas" class="confetti"></canvas>

    <script>
        /* ---------------- Data ---------------- */
        const questions = [
            { text: "All families are small.", answer: false },
            { text: "Cousins live together in a small family.", answer: false },
            { text: "Members of a family love, care and help one another.", answer: true },
            { text: "We take rest in the kitchen.", answer: false },
            { text: "We eat food in the dining room.", answer: true }
        ];

        /* ---------------- DOM ---------------- */
        const main = document.getElementById('main');
        const qNumber = document.getElementById('qNumber');
        const qText = document.getElementById('qText');
        const readBtn = document.getElementById('readBtn');
        const btnTrue = document.getElementById('btnTrue');
        const btnFalse = document.getElementById('btnFalse');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const teacherPopup = document.getElementById('teacherPopup');
        const teacherImg = document.getElementById('teacherImg');
        const teacherMsg = document.getElementById('teacherMsg');
        const confettiCanvas = document.getElementById('confettiCanvas');
        const ctx = confettiCanvas.getContext('2d');
        const feedbackSmiley = document.getElementById('feedbackSmiley');

        /* ---------------- Audio Setup ---------------- */
        let audioCtx = null;

        function ensureAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            return audioCtx;
        }

        function playCorrectTone() {
            const ctx = ensureAudio();
            const now = ctx.currentTime;
            const o1 = ctx.createOscillator(), o2 = ctx.createOscillator(), g = ctx.createGain();
            o1.type = 'sine'; o1.frequency.value = 880;
            o2.type = 'sine'; o2.frequency.value = 1100;
            g.gain.setValueAtTime(0, now);
            g.gain.linearRampToValueAtTime(0.18, now + 0.01);
            g.gain.exponentialRampToValueAtTime(0.0001, now + 0.6);
            o1.connect(g); o2.connect(g); g.connect(ctx.destination);
            o1.start(now); o2.start(now);
            o1.stop(now + 0.6); o2.stop(now + 0.6);
        }

        function playCompletionTone() {
            const ctx = ensureAudio();
            const now = ctx.currentTime;
            const freqs = [660, 880, 1320];
            const gain = ctx.createGain();
            gain.gain.setValueAtTime(0, now);
            gain.gain.linearRampToValueAtTime(0.18, now + 0.01);
            freqs.forEach(f => {
                const o = ctx.createOscillator();
                o.type = 'sine'; o.frequency.value = f; o.connect(gain);
                o.start(now); o.stop(now + 1.2);
            });
            gain.connect(ctx.destination);
            gain.gain.exponentialRampToValueAtTime(0.0001, now + 1.2);
        }

        function playWrongBuzz() {
            const ctx = ensureAudio();
            const now = ctx.currentTime;
            const o = ctx.createOscillator(), g = ctx.createGain();
            o.type = 'square'; o.frequency.value = 180;
            g.gain.setValueAtTime(0, now);
            g.gain.linearRampToValueAtTime(0.12, now + 0.01);
            g.gain.exponentialRampToValueAtTime(0.0001, now + 0.35);
            o.connect(g); g.connect(ctx.destination);
            o.start(now); o.stop(now + 0.35);
        }

        /* ---------------- Confetti ---------------- */
        let confettiParticles = [];

        function resizeCanvas() {
            confettiCanvas.width = window.innerWidth;
            confettiCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function launchConfetti(duration = 2600, count = 120) {
            confettiParticles = [];
            const W = confettiCanvas.width, H = confettiCanvas.height;
            for (let i = 0; i < count; i++) {
                confettiParticles.push({
                    x: Math.random() * W,
                    y: -10 - Math.random() * 200,
                    vx: (Math.random() - 0.5) * 6,
                    vy: 2 + Math.random() * 6,
                    size: 5 + Math.random() * 10,
                    color: `hsl(${Math.floor(Math.random() * 360)},90%,60%)`,
                    rot: Math.random() * 360,
                    rotSpeed: (Math.random() - 0.5) * 12
                });
            }
            requestAnimationFrame(drawConfetti);
            setTimeout(() => {
                confettiParticles = [];
                ctx.clearRect(0, 0, W, H);
            }, duration);
        }

        function drawConfetti() {
            ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            confettiParticles.forEach(p => {
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rot * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size * 0.6);
                ctx.restore();
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.06;
                p.rot += p.rotSpeed;
            });
            if (confettiParticles.length) requestAnimationFrame(drawConfetti);
        }

        /* ---------------- Smiley Feedback ---------------- */
        function showSmiley(emoji, isCorrect) {
            feedbackSmiley.classList.remove('show', 'fade');
            feedbackSmiley.textContent = emoji;

            requestAnimationFrame(() => {
                feedbackSmiley.classList.add('show');

                setTimeout(() => {
                    feedbackSmiley.classList.add('fade');
                }, 500);

                setTimeout(() => {
                    feedbackSmiley.classList.remove('show', 'fade');
                    if (!isCorrect) {
                        resetAnswerSelection();
                    }
                }, 1300);
            });
        }

        function resetAnswerSelection() {
            selected = null;
            btnTrue.classList.remove('selected');
            btnFalse.classList.remove('selected');
            updateNavButtons();
        }

        /* ---------------- Quiz Logic ---------------- */
        let idx = 0, selected = null;

        function speakText(txt) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(txt);

                const voices = speechSynthesis.getVoices();
                const indianVoice = voices.find(v =>
                    v.lang === 'en-IN' || v.name.includes('India')
                );

                if (indianVoice) {
                    u.voice = indianVoice;
                } else {
                    u.lang = 'en-IN';
                }

                u.rate = 0.95;
                u.pitch = 1;

                window.speechSynthesis.speak(u);
            }
        }

        function updateNavButtons() {
            prevBtn.disabled = idx === 0;
            nextBtn.disabled = selected === null;

            if (idx === questions.length - 1) {
                nextBtn.textContent = 'FINISH';
                nextBtn.title = 'Finish quiz';
            } else {
                nextBtn.textContent = 'NEXT â–¶';
                nextBtn.title = 'Next question';
            }
        }

        function showQuestion(i) {
            const q = questions[i];
            qNumber.textContent = `Question ${i + 1} of ${questions.length}`;
            qText.textContent = q.text;
            selected = null;

            btnTrue.classList.remove('selected');
            btnFalse.classList.remove('selected');
            updateNavButtons();
        }

        function showTeacher(isCorrect) {
            if (isCorrect) {
                teacherImg.src = 'uploads/yes.png';
                teacherMsg.textContent = "Great job! That's right ðŸŽ‰";
            } else {
                teacherImg.src = 'uploads/no.png';
                teacherMsg.textContent = "Oops! Not quite â€” try again.";
            }
            teacherPopup.classList.add('show');
            setTimeout(() => teacherPopup.classList.remove('show'), 2400);
        }

        function showCompletePopup() {
            playCompletionTone();
            launchConfetti(3000, 180);

            const div = document.createElement('div');
            div.className = 'final-modal-overlay';
            div.innerHTML = `
                <div class="final-modal">
                    <h2>ðŸŽ‰ðŸ¥³ YOU WON! ðŸ¥³ðŸŽ‰</h2>
                    <p style="font-size:24px; color:#555;">You completed the quiz. You are a superstar!</p>
                    <div class="final-actions">
                        <button class="btn primary" onclick="location.reload()">PLAY AGAIN â†º</button>
                    </div>
                </div>
            `;
            document.body.appendChild(div);
        }

        function selectAnswer(isTrue) {
            btnTrue.disabled = true;
            btnFalse.disabled = true;

            const q = questions[idx];
            selected = isTrue;

            btnTrue.classList.remove('selected');
            btnFalse.classList.remove('selected');

            if (isTrue) btnTrue.classList.add('selected');
            else btnFalse.classList.add('selected');

            updateNavButtons();
            ensureAudio();

            if (q.answer === isTrue) {
                playCorrectTone();
                showTeacher(true);
                showSmiley('ðŸ˜ƒ', true);

                if (idx === questions.length - 1) {
                    launchConfetti(2200, 160);
                    nextBtn.disabled = true;
                    nextBtn.style.visibility = 'hidden';

                    setTimeout(() => {
                        showCompletePopup();
                    }, 1200);
                } else {
                    launchConfetti(1200, 100);
                    btnTrue.disabled = false;
                    btnFalse.disabled = false;
                }

            } else {
                playWrongBuzz();
                showTeacher(false);
                showSmiley('ðŸ˜­', false);

                setTimeout(() => {
                    btnTrue.disabled = false;
                    btnFalse.disabled = false;
                }, 1400);
            }
        }

        /* ---------------- Event wiring ---------------- */
        btnTrue.addEventListener('click', () => selectAnswer(true));
        btnFalse.addEventListener('click', () => selectAnswer(false));

        nextBtn.addEventListener('click', () => {
            if (selected === null) return;
            if (idx < questions.length - 1) {
                idx++;
                showQuestion(idx);
            } else {
                showCompletePopup();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (idx > 0) {
                idx--;
                showQuestion(idx);
            }
        });

        readBtn.addEventListener('click', () => {
            readBtn.style.transform = 'scale(1.1)';
            setTimeout(() => readBtn.style.transform = 'scale(1)', 100);
            speakText(questions[idx].text);
        });

        showQuestion(0);
        updateNavButtons();

        if ('speechSynthesis' in window) window.speechSynthesis.getVoices();
    </script>
</body>

</html>
